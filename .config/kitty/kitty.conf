# vim:fileencoding=utf-8:foldmethod=marker

# ============================================================
# Fonts {{{
# ============================================================

font_family      JetBrainsMono Nerd Font
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size 22.0

symbol_map U+e000-U+e00a,U+ea60-U+ebeb,U+e0a0-U+e0c8,U+e0ca,U+e0cc-U+e0d4,U+e200-U+e2a9,U+e300-U+e3e3,U+e5fa-U+e6b1,U+e700-U+e7c5,U+f000-U+f2e0,U+f300-U+f372,U+f400-U+f532,U+f0001-U+f1af0 Symbols Nerd Font

disable_ligatures never
font_features JetBrainsMono Nerd Font +calt +case +cv01 +cv02 +cv03 +cv04 +cv05 +cv06 +cv07 +cv08 +cv09 +cv10 +cv11 +cv12 +cv14 +cv15 +cv16 +cv17 +cv18 +cv19 +cv20 +cv99 +frac +locl +ss01 +ss02 +ss19 +ss20 +mark +mkmk

text_composition_strategy platform

# }}}

# ============================================================
# Cursor {{{
# ============================================================

cursor_shape beam
cursor_beam_thickness 4.0
cursor_underline_thickness 2.4
cursor_blink_interval 0
cursor_shape_unfocused hollow
undercurl_style thick-dense

# }}}

# ============================================================
# Scrollback {{{
# ============================================================

scrollback_lines 640000
scrollback_pager_history_size 512
scrollback_fill_enlarged_window yes
wheel_scroll_multiplier 8.0
touch_scroll_multiplier 4.0

# }}}

# ============================================================
# Scrollbar {{{
# ============================================================

scrollbar hovered
scrollbar_width 0.5
scrollbar_hover_width 1
scrollbar_handle_opacity 0.5
scrollbar_radius 0.3

# }}}

# ============================================================
# Mouse {{{
# ============================================================

url_style double
detect_urls yes
open_url_with default
show_hyperlink_targets yes
underline_hyperlinks hover
copy_on_select yes
paste_actions quote-urls-at-prompt
focus_follows_mouse no
strip_trailing_spaces smart
select_by_word_characters @-./_~?&=%+#
mouse_hide_wait 3.0

# }}}

# ============================================================
# Performance {{{
# ============================================================

repaint_delay 0
input_delay 0
sync_to_monitor no

# }}}

# ============================================================
# Bell {{{
# ============================================================

enable_audio_bell no
visual_bell_duration 0

# }}}

# ============================================================
# Window {{{
# ============================================================

window_border_width 0
draw_minimal_borders no
window_margin_width 4.0
single_window_margin_width 4.0
window_padding_width 4.0
single_window_padding_width 4.0
inactive_text_alpha 0.9

hide_window_decorations no
window_logo_path none
confirm_os_window_close -1
resize_debounce_time 0.05 0.2
placement_strategy center

# }}}

# ============================================================
# Tab Bar {{{
# ============================================================

tab_bar_edge bottom
tab_bar_margin_width 0.0
tab_bar_margin_height 8.0 0.0
tab_bar_style separator
tab_switch_strategy left
tab_title_template         "ó°¨¸ {index} {title}"
active_tab_title_template  "ó°… {index} {title}"
tab_separator " | "
tab_activity_symbol "  "
tab_bar_align left
tab_bar_min_tabs 2
bell_on_tab "ðŸ”” "

# }}}

# ============================================================
# Background {{{
# ============================================================

dynamic_background_opacity yes

# }}}

# ============================================================
# Advanced {{{
# ============================================================

editor nvim
allow_remote_control yes
listen_on unix:/tmp/kitty
allow_hyperlinks yes
allow_cloning ask
clipboard_max_size 512

# }}}

# ============================================================
# Shell Integration {{{
# ============================================================

shell_integration enabled no-cursor
notify_on_cmd_finish unfocused 30.0

# }}}

# ============================================================
# OS Specific {{{
# ============================================================

linux_display_server auto
wayland_titlebar_color system

# }}}

# ============================================================
# Keyboard Shortcuts {{{
# ============================================================

# Window navigation
map ctrl+tab next_window
map kitty_mod+tab previous_window
map kitty_mod+h neighboring_window left
map kitty_mod+j neighboring_window down
map kitty_mod+k neighboring_window up

# Layouts
map kitty_mod+l next_layout
map ctrl+alt+t goto_layout tall
map ctrl+alt+s goto_layout stack
map ctrl+alt+g goto_layout grid
map ctrl+alt+f goto_layout fat
map f11 toggle_layout stack

# Layout actions (moved to window modal mode to avoid conflicts)

# Tabs
map ctrl+1 goto_tab 1
map ctrl+2 goto_tab 2
map ctrl+3 goto_tab 3
map ctrl+4 goto_tab 4
map ctrl+5 goto_tab 5
map ctrl+6 goto_tab 6
map ctrl+7 goto_tab 7
map ctrl+8 goto_tab 8
map ctrl+9 goto_tab 9

# Misc
map kitty_mod+f1 show_kitty_doc overview
map kitty_mod+f11 toggle_fullscreen
map ctrl+cmd+f toggle_fullscreen
map kitty_mod+u kitten unicode_input

# Hints kitten (kitty_mod+p prefix)
map kitty_mod+p>f kitten hints --type path --program -
map kitty_mod+p>l kitten hints --type line --program -
map kitty_mod+p>w kitten hints --type word --program -
map kitty_mod+p>h kitten hints --type hash --program -
map kitty_mod+p>u kitten hints --type url
map kitty_mod+p>o kitten hints --type hyperlink

# Shell integration shortcuts
map kitty_mod+z scroll_to_prompt -1
map kitty_mod+x scroll_to_prompt 1
map kitty_mod+o show_last_command_output

# Copy/Paste
map kitty_mod+c copy_to_clipboard
map kitty_mod+v paste_from_clipboard
map kitty_mod+s paste_from_selection

# New window/tab with cwd
map kitty_mod+enter new_window_with_cwd
map kitty_mod+t new_tab_with_cwd
map kitty_mod+n new_os_window_with_cwd

# Close
map kitty_mod+q close_window
map kitty_mod+w close_tab

# Tab navigation
map kitty_mod+right next_tab
map kitty_mod+left previous_tab
map kitty_mod+. move_tab_forward
map kitty_mod+, move_tab_backward

# Scrolling
map kitty_mod+home scroll_home
map kitty_mod+end scroll_end
map kitty_mod+page_up scroll_page_up
map kitty_mod+page_down scroll_page_down

# Font size
map kitty_mod+equal change_font_size all +2.0
map kitty_mod+minus change_font_size all -2.0
map kitty_mod+backspace change_font_size all 0

# Terminal control
map kitty_mod+delete clear_terminal reset active
map kitty_mod+f5 load_config_file
map kitty_mod+f6 debug_config

# Background opacity
map kitty_mod+a>m set_background_opacity +0.1
map kitty_mod+a>l set_background_opacity -0.1
map kitty_mod+a>1 set_background_opacity 1
map kitty_mod+a>d set_background_opacity default

# }}}

# ============================================================
# Window Modal Mode {{{
# ============================================================

# Enter window management mode with kitty_mod+w
map --new-mode wm ctrl+alt+w

# Navigation (hjkl)
map --mode wm h neighboring_window left
map --mode wm j neighboring_window down
map --mode wm k neighboring_window up
map --mode wm l neighboring_window right

# Move windows (Shift+hjkl)
map --mode wm shift+h move_window left
map --mode wm shift+j move_window down
map --mode wm shift+k move_window up
map --mode wm shift+l move_window right

# Resize windows
map --mode wm n resize_window narrower
map --mode wm w resize_window wider
map --mode wm t resize_window taller
map --mode wm s resize_window shorter
map --mode wm r resize_window reset

# Splits
map --mode wm - launch --location=hsplit --cwd=current
map --mode wm | launch --location=vsplit --cwd=current
map --mode wm \ launch --location=vsplit --cwd=current

# Close
map --mode wm c close_window
map --mode wm x close_window

# Layout actions (moved from global to avoid conflicts)
map --mode wm [ layout_action decrease_num_full_size_windows
map --mode wm ] layout_action increase_num_full_size_windows
map --mode wm / layout_action mirror toggle
map --mode wm m layout_action mirror toggle

# Exit mode
map --mode wm esc pop_keyboard_mode
map --mode wm enter pop_keyboard_mode
map --mode wm q pop_keyboard_mode

# }}}

# ============================================================
# Mouse Mappings {{{
# ============================================================

mouse_map right press ungrabbed mouse_select_command_output

# }}}

# ============================================================
# kitty-scrollback.nvim {{{
# ============================================================

action_alias kitty_scrollback_nvim kitten /home/utsav/.local/share/nvim/lazy/kitty-scrollback.nvim/python/kitty_scrollback_nvim.py

# Browse scrollback buffer in nvim
map kitty_mod+g kitty_scrollback_nvim
# Browse output of the last shell command in nvim
map ctrl+alt+g kitty_scrollback_nvim --config ksb_builtin_last_cmd_output
# Show clicked command output in nvim
mouse_map ctrl+shift+right press ungrabbed combine : mouse_select_command_output : kitty_scrollback_nvim --config ksb_builtin_last_visited_cmd_output

# }}}

# ============================================================
# Colors {{{
# ============================================================

include current-theme.conf

# }}}
